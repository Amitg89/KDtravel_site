

function timeFormat(_date)
{
    var hr = _date.getHours();
    var min = _date.getMinutes();
    if(min > 30){
            if(hr == 23){
                return '00'+':'+'00';
            }else{
                return (hr+1) +':'+'00';
            }
    }else{
        return hr +':'+'30';
    }
}
function dateFormat(_date)
{
    var dd = _date.getDate();
    var mm = _date.getMonth() + 1; //January is 0!
    var yyyy = _date.getFullYear();


    if (dd < 10) {
		  dd = '0' + dd;
		} 
		if (mm < 10) {
		  mm = '0' + mm;
    } 
    return yyyy + '-' + mm + '-' + dd;

}

    var today = dateFormat(new Date());
    var tomorrow = dateFormat(new Date());
    var currentTime = timeFormat(new Date());


$(document).ready(function()
{
   
    $("[data-bs-hover-animate]").mouseenter(function()
    {
        var a=$(this);
        a.addClass("animated "+a.attr("data-bs-hover-animate"))}).mouseleave(function(){var a=$(this);a.removeClass("animated "+a.attr("data-bs-hover-animate"))
    });

    var num = null;
	$('#ageGroup>button.btn').on("click", function(){ //get buttons group value
	$('#ageGroup>button.btn').css("background-color", "rgba(255,107,0,0.78)");
	$(this).css("background-color", "#007bff");
	num = $(this).text();
	$('#ageGroupInput').val(num);
	});
	
	$('#car-group').on("change", () =>
	{
		var selected = $('#car-group').prop('selectedIndex');
		selected--;
		$('#carousel-1').carousel(selected);
		$('#carousel-1').carousel('pause');
		
	});
	
	
	
	
	$('#pickupDate').datetimepicker({
        timepicker:false,
        format:'Y-m-d',
        theme:'light',
        value: today,
        minDate:0,
        scrollMonth : false,
	    scrollInput : false,
        onSelectDate:function(){
                      
            var ct=new Date();
            ct = $('#pickupDate').val();
            
            $('#returnDate').datetimepicker({minDate:ct,value: ct});
        }
    });
    $('#pickupTime').datetimepicker({
        value:currentTime,
        datepicker:false,
        format:"g:i A",
        formatTime:'g:i A',
        validateOnBlur: false,
        step:30,
        theme:'light',
        onShow:function(){
            var pickUpDate  = $("#pickupDate").val();
            var ReturnDate  = $("#returnDate").val();
            if( pickUpDate == today)
            {
                this.setOptions({
                    minTime:0,
                });
                
            }
            else
            {
                this.setOptions({
                    minTime:'00:00'
                });
            }

        },
        onSelectTime:function(ct,$i){

            $('#pickupTime').removeClass('cst_date_time');
            $('#returnTime').datetimepicker({value: ct});
        }
    });

    
    $('#returnDate').datetimepicker({
        timepicker:false,
        format:'Y-m-d',
        theme:'light',
        value: today,
        minDate:today,
        scrollMonth : false,
	    scrollInput : false,


    });
    $('#returnTime').datetimepicker({
        value:currentTime,
        datepicker:false,
        format:"g:i A",
        formatTime:'g:i A',
        step:30,
        theme:'light',
        onShow:function(){
            var returnDate  = $("#returnDate").val();
            if( returnDate == today){
                this.setOptions({
                    minTime:0,
                });
            }else{
                this.setOptions({
                    minTime:'00:00'
                });
            }
        },
        onSelectTime:function(){
            $('#returnTime').removeClass('cst_date_time');
        }
    });
});

window.addEventListener("load",()=>{
	

	
	var showResBtn = document.querySelector('#showRes');
	showResBtn.addEventListener("click", ()=>
	{
		var name= document.getElementById('nameInput').value;
		var email = document.getElementById('emailInput').value;
		var phone = document.getElementById('phoneInput').value;
		var note = document.getElementById('noteInput').value;
		var dd = document.getElementById("pickup-location");
        var pickupLoc = dd.options[dd.selectedIndex].value;
		var pickupDate = document.getElementById('pickupDate').value;
		var pickupTime = document.getElementById('pickupTime').value;
		dd = document.getElementById("return-location");
		var returnLoc = dd.options[dd.selectedIndex].value;
		var returnDate = document.getElementById('returnDate').value;
		var returnTime = document.getElementById('returnTime').value;
		dd = document.getElementById("car-group");
		var carGroup = dd.options[dd.selectedIndex].value;
		dd = document.getElementById("insurancePicker");
		var insurancePicker = dd.options[dd.selectedIndex].value;
		var shabbatObservance = document.querySelector('#formCheck-1').checked;
		var tourist = document.querySelector('#formCheck-2').checked;
		var ageGroup = null;
		
		
		if(shabbatObservance)
		{
			shabbatObservance = "Yes";
		}else{
			shabbatObservance = "No";
		}
		if(tourist)
		{
			tourist = "Yes";
		}else{
			tourist = "No";
		}
		 
		
		
		document.getElementById("resShow").innerHTML = "<b>Pickup location: </b>" + pickupLoc + "</br>" + "<b>Pickup date: </b>" + pickupDate  + "<b> Pickup time: </b>" + pickupTime + "</br></br>" + 
				"<b>Return location: </b>" + returnLoc + "</br>" +  "<b>Return date: </b>"  + returnDate +  " <b>Return time: </b>" + returnTime + "</br></br>" + 
				"<b>Car group selected: </b>"+ carGroup + "</br>" +  "<b>Insurance selected: </b>" + insurancePicker + "</br>" +  "<b>Shabat observance? </b>" + shabbatObservance + "</br>" +  "<b>Tourist? (NO VAT): </b>" + tourist + "</br></br>" + 
				"<b>Full name: </b>" + name + "</br>" +  "<b>Email address: </b>" + email + "</br>" + "<b>Phone number: </b>" + phone + "</br>" + "<b>Age group: </b>" + ageGroup + "</br></br>" + 
				"<b>Remarks: </b>" + note +"</br>";
		
	});

});



